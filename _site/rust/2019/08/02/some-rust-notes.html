<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Some Rust notes</title>
	
	<meta name="author" content="SilMOON">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<!--search engine verification-->
	<meta name="google-site-verification" content="sM9xRwOwsMBKUko32WKBFD-cbCrHF8c3Nn-vIKuzeJE" />

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="https://github.com/SilMOON">
				<i class="fa fa-github"></i>
			</a>
			
			
			
			<a class="navbar-brand" href="/">
				<img src="https://www.gravatar.com/avatar/42a0f21355b450beade4a5a062c6983c?s=35" class="img-circle" />
				SilMOON
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="https://www.gravatar.com/avatar/42a0f21355b450beade4a5a062c6983c?s=150" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/">SilMOON</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Student, programmer.
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/SilMOON">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
	<h1>Some Rust notes </h1>
</div>

<article>

	<div class="col-sm-10">
		<span class="post-date">
			
			August
			2nd,
			
			2019
		</span>
		<div class="article_body">
			<ol>
  <li>io::stdin().read_line(&amp;xx) appends new value on the target which is “xx” in this case.</li>
  <li>A tuple can have values with different types in it while an array must have the same type.</li>
  <li>A tuple with explictly type annotations example:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">f64</span><span class="p">,</span> <span class="nb">u8</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mf">6.4</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>An array in Rust have a fixed length while a Vector can grow or shrink its size.</li>
  <li>An array with explictly type and elements’ number annotations example:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">a</span><span class="p">:</span> <span class="p">[</span><span class="nb">i32</span><span class="p">;</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>
</code></pre></div>    </div>
  </li>
  <li>If [6, 6, 6, 6, 6] is the desirable array, we can declare it in this way:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">;</span> <span class="mi">5</span><span class="p">];</span>
</code></pre></div>    </div>
  </li>
  <li>A good way to create a new instance of a struct that uses most of an old instance’s values but changes some is using update syntax:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">user2</span> <span class="o">=</span> <span class="n">User</span> <span class="p">{</span>
 <span class="n">email</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"user2@example.com"</span><span class="p">),</span>
 <span class="n">username</span><span class="p">:</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"user2name"</span><span class="p">),</span>
 <span class="o">..</span><span class="n">user1</span>
<span class="p">};</span>
</code></pre></div>    </div>
  </li>
  <li>An example of using derived traits of custom structs:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">#[derive(Debug)]</span>
<span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span><span class="n">user1</span><span class="p">);</span>
<span class="nd">println!</span><span class="p">(</span><span class="s">"{:#?}"</span><span class="p">,</span><span class="n">user1</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>If a struct tuple is defined, when a function want to call an instance of this struct, other struct tuple (even with the same form) cannot be used:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="nf">Color</span> <span class="p">(</span><span class="nb">u32</span><span class="p">,</span><span class="nb">u32</span><span class="p">,</span><span class="nb">u32</span><span class="p">);</span>
<span class="k">struct</span> <span class="nf">Point</span> <span class="p">(</span><span class="nb">u32</span><span class="p">,</span><span class="nb">u32</span><span class="p">,</span><span class="nb">u32</span><span class="p">);</span>
</code></pre></div>    </div>
    <p>In this case, if a function want to call an instance of “Color”, we cannot put an instance of “Point” in it even they have the same form.</p>
  </li>
  <li>An example of a struct and its method implementation:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">Rectangle</span> <span class="p">{</span>
<span class="n">width</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="n">height</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>
<span class="k">impl</span> <span class="n">Rectangle</span> <span class="p">{</span>
<span class="k">fn</span> <span class="nf">area</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
    <span class="k">self</span><span class="py">.width</span> <span class="o">*</span> <span class="k">self</span><span class="py">.height</span>
<span class="p">}</span>

<span class="c">//method with multiple parameters</span>
<span class="k">fn</span> <span class="nf">can_hold</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span><span class="o">&amp;</span><span class="n">Rectangle</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">bool</span> <span class="p">{</span>
    <span class="k">self</span><span class="py">.height</span> <span class="o">&gt;</span> <span class="n">other</span><span class="py">.height</span> <span class="o">&amp;&amp;</span> <span class="k">self</span><span class="py">.width</span> <span class="o">&gt;</span> <span class="n">other</span><span class="py">.width</span>
<span class="p">}</span>

<span class="c">//associated function</span>
<span class="k">fn</span> <span class="nf">square</span><span class="p">(</span><span class="n">size</span><span class="p">:</span><span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Rectangle</span> <span class="p">{</span>
    <span class="n">Rectangle</span> <span class="p">{</span><span class="n">width</span><span class="p">:</span><span class="n">size</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span><span class="n">size</span><span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>When we want to use them:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rect1</span><span class="nf">.can_hold</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rect2</span><span class="p">)</span>
<span class="k">let</span> <span class="n">sq</span> <span class="o">=</span> <span class="nn">Rectangle</span><span class="p">::</span><span class="nf">square</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li>Option<T> and T are different types so that we cannot add an i8 and an Option<i8>.</i8></T></li>
  <li>If we use None rather than Some, we need to tell Rust what type of Option<T> we have:
</T>    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">absent_number</span><span class="p">:</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">None</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Using match in order to check elements in enum or check Option<T>:
</T>    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">match</span> <span class="n">seven</span> <span class="p">{</span>
<span class="nf">Some</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span> <span class="n">seven</span><span class="p">),</span>
<span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>The <code class="highlighter-rouge">_</code> pattern will match any value. The <code class="highlighter-rouge">()</code> is just the unit value, so nothing will happen in the _ case.
However, the example above can be written in <code class="highlighter-rouge">if let</code> which is simpler to read:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="k">let</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">=</span> <span class="n">seven</span> <span class="p">{</span>
<span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span><span class="n">seven</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>Also, <code class="highlighter-rouge">else</code> can be used with <code class="highlighter-rouge">if let</code>:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="k">let</span> <span class="nf">Some</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="o">=</span> <span class="n">seven</span> <span class="p">{</span>
<span class="nd">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span><span class="n">seven</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="nd">println!</span><span class="p">(</span><span class="s">"This is a else statement."</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>Absolute path starts from a crate root by using a crate name or a literal <code class="highlighter-rouge">crate</code>:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">crate</span><span class="p">::</span><span class="nn">front_house</span><span class="p">::</span><span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
</code></pre></div>    </div>
    <p>Relative path starts from the current module and uses <code class="highlighter-rouge">self</code>, <code class="highlighter-rouge">super</code>, or an identifier in the current module:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">front_house</span><span class="p">::</span><span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
<span class="k">self</span><span class="p">::</span><span class="nn">front_house</span><span class="p">::</span><span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
</code></pre></div>    </div>
    <p>btw when we use <code class="highlighter-rouge">use</code> keyword for this one, we need to use <code class="highlighter-rouge">self</code> (but this usage might not be necessary in the future):</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="k">self</span><span class="p">::</span><span class="nn">front_of_house</span><span class="p">::</span><span class="n">hosting</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Use nested paths to bring the same items into scope in one line:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">std</span><span class="p">::{</span><span class="nn">cmp</span><span class="p">::</span><span class="n">Ordering</span><span class="p">,</span> <span class="n">io</span><span class="p">};</span>
</code></pre></div>    </div>
    <p>When there are two <code class="highlighter-rouge">use</code> statements where one is a subpath of the other, instead of using:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Write</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>we can use:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::{</span><span class="k">self</span><span class="p">,</span> <span class="n">Write</span><span class="p">};</span>
</code></pre></div>    </div>
  </li>
  <li>When using <code class="highlighter-rouge">pub</code> to a struct, we need to also use <code class="highlighter-rouge">pub</code> to fields we want to make it public:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">struct</span> <span class="n">Breakfast</span> <span class="p">{</span>
<span class="k">pub</span> <span class="n">toast</span> <span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="c">//fruit is still private as its default</span>
<span class="n">fruit</span> <span class="p">:</span> <span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>but for an enum we only need to use <code class="highlighter-rouge">pub</code> to the enum itself:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">enum</span> <span class="n">Appetizer</span> <span class="p">{</span>
<span class="c">//both Soup and Salad are now public</span>
<span class="n">Soup</span><span class="p">,</span>
<span class="n">Salad</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>Usually we <code class="highlighter-rouge">use</code> the full path for structs and enums:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="k">let</span> <span class="k">mut</span> <span class="n">map</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="n">map</span><span class="nf">.insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>when multiple of them have the same name we want to use their parent path in order to avoid conflicts:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">fmt</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">function1</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nn">fmt</span><span class="p">::</span><span class="n">Result</span> <span class="p">{}</span>
<span class="k">fn</span> <span class="nf">function2</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nn">io</span><span class="p">::</span><span class="n">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span> <span class="p">{}</span>
</code></pre></div>    </div>
    <p>but we can still use the full path if we use <code class="highlighter-rouge">as</code> keyword to give them aliases:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Result</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">io</span><span class="p">::</span><span class="n">Result</span> <span class="k">as</span> <span class="n">IoResult</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">function1</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span> <span class="p">{}</span>
<span class="k">fn</span> <span class="nf">function2</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">IoResult</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span> <span class="p">{}</span>
</code></pre></div>    </div>
    <p>and usually when we want to use functions from outside, we <code class="highlighter-rouge">use</code> their parent path.</p>
  </li>
  <li>We can separate modules into different files and still <code class="highlighter-rouge">use</code> the same path when we use them. But we need to declare them first in their parent path level by level until it comes to lib.rs. In this example ,the files structure is like this:<br />
|-src<br />
|   -front_of_house<br />
|      -hosting.rs<br />
|   -lib.rs<br />
|   -front_of_house.rs<br />
lib.rs:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mod</span> <span class="n">front_of_house</span><span class="p">;</span>
<span class="k">pub</span> <span class="k">use</span> <span class="nn">crate</span><span class="p">::</span><span class="nn">front_of_house</span><span class="p">::</span><span class="n">hosting</span><span class="p">;</span>
<span class="k">pub</span> <span class="k">fn</span> <span class="nf">eat_at_restaurant</span><span class="p">()</span> <span class="p">{</span>
<span class="nn">hosting</span><span class="p">::</span><span class="nf">add_to_waitlist</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>front_of_house.rs:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">mod</span> <span class="n">hosting</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>hosting.rs:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">fn</span> <span class="nf">add_to_waitlist</span><span class="p">()</span> <span class="p">{}</span>
</code></pre></div>    </div>
  </li>
  <li>Store elements with different types using <code class="highlighter-rouge">enum</code>:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">enum</span> <span class="n">SpreadsheetCell</span> <span class="p">{</span>
<span class="nf">Int</span><span class="p">(</span><span class="nb">i32</span><span class="p">),</span>
<span class="nf">Float</span><span class="p">(</span><span class="nb">f64</span><span class="p">),</span>
<span class="nf">Text</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
<span class="p">}</span>
<span class="k">let</span> <span class="n">row</span> <span class="o">=</span> <span class="nd">vec!</span><span class="p">[</span>
<span class="nn">SpreadsheetCell</span><span class="p">::</span><span class="nf">Int</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
<span class="nn">SpreadsheetCell</span><span class="p">::</span><span class="nf">Text</span><span class="p">(</span><span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"test"</span><span class="p">)),</span>
<span class="nn">SpreadsheetCell</span><span class="p">::</span><span class="nf">Float</span><span class="p">(</span><span class="mf">3.14</span><span class="p">),</span>
<span class="p">];</span>
</code></pre></div>    </div>
  </li>
  <li>Cast a type to a different type:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">num1</span> <span class="p">:</span> <span class="nb">u32</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">let</span> <span class="n">num</span> <span class="p">:</span> <span class="nb">f32</span> <span class="o">=</span> <span class="p">(</span><span class="n">num1</span><span class="p">)</span> <span class="k">as</span> <span class="nb">f32</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>Instead of just using <code class="highlighter-rouge">match</code> in error handling:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">read_username_from_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">);</span>

<span class="k">let</span> <span class="k">mut</span> <span class="n">f</span> <span class="o">=</span> <span class="k">match</span> <span class="n">f</span> <span class="p">{</span>
    <span class="nf">Ok</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">file</span><span class="p">,</span>
    <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="k">return</span> <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>

<span class="k">match</span> <span class="n">f</span><span class="nf">.read_to_string</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">Ok</span><span class="p">(</span><span class="mi">_</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">s</span><span class="p">),</span>
    <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">Err</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>We can use <code class="highlighter-rouge">?</code>:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">read_username_from_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="k">let</span> <span class="k">mut</span> <span class="n">f</span> <span class="o">=</span> <span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="n">f</span><span class="nf">.read_to_string</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="nf">Ok</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>Or the shorter one:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">read_username_from_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="k">let</span> <span class="k">mut</span> <span class="n">s</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="nn">File</span><span class="p">::</span><span class="nf">open</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span><span class="o">?</span><span class="nf">.read_to_string</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">s</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="nf">Ok</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>BTW in the case above there is a even shorter way to do the same thing:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">read_username_from_file</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nn">io</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="nn">fs</span><span class="p">::</span><span class="nf">read_to_string</span><span class="p">(</span><span class="s">"hello.txt"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>When using <code class="highlighter-rouge">trait</code> as a parameter in a function:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">fn</span> <span class="nf">notify</span><span class="p">(</span><span class="n">item1</span><span class="p">:</span> <span class="k">impl</span> <span class="n">Summary</span><span class="p">,</span> <span class="n">item2</span><span class="p">:</span> <span class="k">impl</span> <span class="n">Summary</span><span class="p">)</span> <span class="p">{}</span>
</code></pre></div>    </div>
    <p>in this case is similar to:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">fn</span> <span class="n">notify</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Summary</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item1</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">item2</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="p">{</span>
</code></pre></div>    </div>
    <p>However, this way will force both parameters to have the same type whih is T. If we want to allow <code class="highlighter-rouge">item1</code> and <code class="highlighter-rouge">item2</code> to have different types, it’s more appropriate to use <code class="highlighter-rouge">impl Trait</code> syntax.</p>
  </li>
  <li>We can use <code class="highlighter-rouge">+</code> for multiple trait bounds:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">fn</span> <span class="nf">notify</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="k">impl</span> <span class="n">Summary</span> <span class="o">+</span> <span class="n">Display</span><span class="p">)</span> <span class="p">{}</span>
</code></pre></div>    </div>
    <p>which in this case is the same as:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pub</span> <span class="k">fn</span> <span class="n">notify</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Summary</span> <span class="o">+</span> <span class="n">Display</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="p">{}</span>
</code></pre></div>    </div>
  </li>
  <li>Instead of using:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="n">some_function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Display</span> <span class="o">+</span> <span class="n">Clone</span><span class="p">,</span> <span class="n">U</span><span class="p">:</span> <span class="n">Clone</span> <span class="o">+</span> <span class="n">Debug</span><span class="o">&gt;</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">U</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{}</span>
</code></pre></div>    </div>
    <p>We can use a <code class="highlighter-rouge">where</code> clause:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="n">some_function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="o">&gt;</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">U</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">i32</span>
<span class="k">where</span> <span class="n">T</span><span class="p">:</span> <span class="n">Display</span> <span class="o">+</span> <span class="n">Clone</span><span class="p">,</span>
      <span class="n">U</span><span class="p">:</span> <span class="n">Clone</span> <span class="o">+</span> <span class="n">Debug</span>
<span class="p">{}</span>
</code></pre></div>    </div>
  </li>
  <li>We can make functions to return types which implement a specific trait:
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">returns_summarizable</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="k">impl</span> <span class="n">Summary</span> <span class="p">{}</span>
</code></pre></div>    </div>
    <p>However, we can only use impl Trait if we’re returning a single type. We cannot do this:</p>
    <div class="language-rust highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">returns_summarizable</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="k">impl</span> <span class="n">Summary</span> <span class="p">{</span>
<span class="k">if</span> <span class="n">condition</span> <span class="p">{</span>
    <span class="n">StructA</span><span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">StructB</span><span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>In this case the program will not compile even if both structs have the trait <code class="highlighter-rouge">Summary</code>.</p>
  </li>
</ol>

		</div>

		
		<ul class="tag_box list-unstyled list-inline">
			<li><i class="fa fa-folder-open"></i></li>
			
			
			
			<li><a href="/categories.html#Rust-ref">
					Rust <span>(2)</span>
					
				</a></li>
			
			
		</ul>
		

		
		<ul class="list-inline">
			<li><i class="fa fa-tags"></i></li>
			
			
			
			<li>
				<a href="/tags.html#Tips-ref">
					Tips <span>(4)</span>
					
				</a>
			</li>
			
			
			
		</ul>
		

		<hr>

		<div>
			<!--  *****share botton*****
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="https://twitter.com/share?text=Some Rust notes"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>
  -->

			<section class="col-sm-6 author">
				<img src="https://www.gravatar.com/avatar/42a0f21355b450beade4a5a062c6983c" class="img-rounded author-image" />
				<h4 class="section-title author-name">SilMOON</h4>
				<p class="author-bio">Student, programmer.</p>
			</section>
		</div>

		<div class="clearfix"></div>

		<ul class="pager">
			
			<li class="previous"><a href="/general/2019/06/19/semantic-versioning-note.html"
					title="Semantic versioning note">&larr; Previous</a></li>
			
			
			<li class="next"><a href="/rust/2019/08/09/some-rust-notes-ii.html" title="Some Rust notes II">Next
					&rarr;</a></li>
			
		</ul>

		<hr>
		
		<script src="https://utteranc.es/client.js"
			repo="SilMOON/silmoon.github.io"
			issue-term="pathname"
			label="UttComments"
			theme="github-light"
			crossorigin="anonymous"
			async>
		</script>

	</div>
	<div class="col-sm-2 sidebar-2">
	</div>
</article>

<div class="clearfix"></div>



		<footer style="text-align: center;">
			<hr/>
			<p>
				&copy; 2019 SilMOON with Jekyll. Theme is modified from dbyll.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'SilMOON']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

